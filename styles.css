:root{
  --leather:url("leather.jpg");
  --parchment:url("parchment.jpg");
  --ink:#1a120b; --accent:#b33; --paper:rgba(255,255,240,.9);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--leather) center/cover fixed #2b1a14;
  color:var(--ink); font-family:'Special Elite', system-ui, sans-serif;
}

/* Book */
.book{display:flex; max-width:980px; width:min(96vw,980px); margin:16px auto;
  border-radius:10px; overflow:hidden; box-shadow:0 22px 50px rgba(0,0,0,.55), 0 0 0 2px #000 inset;}
.page{flex:1 1 50%; min-height:72vh; padding:16px; background:var(--parchment) center/cover,#f6f0dc; position:relative;}
.page::after{content:""; position:absolute; inset:8px; border:1px solid #c2b59b; opacity:.6; pointer-events:none;}

#leftPage h2{margin:6px 0 10px; font-family:'IM Fell English',serif;}
#entries{margin:0; padding:0; list-style:none; max-height:calc(72vh - 48px); overflow:auto;}
#entries li{padding:10px 12px; margin:6px 0; border:1px dashed rgba(0,0,0,.2); background:rgba(255,255,255,.35); border-radius:6px; cursor:pointer;}
#entries li:hover{background:rgba(255,255,255,.55)}

#toolbar{display:flex; flex-wrap:wrap; gap:8px; margin-bottom:10px;}
#toolbar button,#toolbar select,#toolbar input[type=color]{
  background:#d1a97c;border:1px solid #8a5c33;border-radius:10px;padding:6px 10px;font-weight:700;cursor:pointer;color:#2b1a14;
}
#toolbar button:active{transform:translateY(1px)}
.fontLabel{display:flex; align-items:center; gap:6px}

#dateLine{font:14px/1.2 'IM Fell English',serif; color:#6e5849; margin:2px 0 8px;}
#editor{min-height:60vh; padding:16px 18px; outline:none; background:var(--paper); border:1px solid rgba(0,0,0,.15); border-radius:8px; box-shadow:inset 0 2px 12px rgba(0,0,0,.12);}
#editor img.rd-img{max-width:100%; height:auto; border-radius:6px; box-shadow:0 2px 8px rgba(0,0,0,.25); cursor:pointer;}
#editor img.size-s{max-width:40%} #editor img.size-m{max-width:70%} #editor img.size-f{max-width:100%}
#editor audio, #editor iframe{max-width:100%; display:block; margin:10px 0;}
#editor hr{border:none; border-top:1px dashed #8a5c33; margin:12px 0;}

#actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;}
#actions button{background:linear-gradient(#c94141,#a02b2b); color:#fff; border:none; border-radius:8px; padding:10px 14px; font-weight:700}
#actions .danger{background:linear-gradient(#b02828,#7f1e1e)}

/* Lock */
body.locked .book{display:none} body.locked #lockscreen{display:flex}
#lockscreen{display:none; position:fixed; inset:0; background:rgba(0,0,0,.75); align-items:center; justify-content:center; z-index:9999;}
#lockscreen .card{width:min(520px,92vw); background:#111; color:#fff; border:1px solid #3a0f0f; border-radius:12px; padding:22px; text-align:center;}
#lockscreen input{width:100%; padding:12px 14px; border:1px solid #444; border-radius:8px; margin:10px 0 12px; background:#000; color:#fff;}
#menuToggle{position:fixed; top:14px; left:14px; z-index:1200; background:#1d1d1d; color:#fff; border:1px solid #444; border-radius:8px; padding:8px 10px;}
#menu{position:fixed; top:0; right:-280px; width:260px; height:100%; background:#1c1c1c; color:#fff; border-left:1px solid #000; padding:16px; transition:right .28s; z-index:1100; display:flex; flex-direction:column; gap:10px;}
#menu.open{right:0}

/* Modal (Galleri) */
.modal{position:fixed; inset:0; background:rgba(0,0,0,.6); display:none; align-items:center; justify-content:center; z-index:1200;}
.modal[aria-hidden="false"]{display:flex}
.modal-card{width:min(920px,96vw); background:#222; color:#fff; border:1px solid #664; border-radius:12px; padding:12px;}
.modal-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;}
.modal-header h3{margin:0}
.modal-header button{background:#444; color:#fff; border:1px solid #666; border-radius:8px; padding:6px 8px}
.gallery-grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:10px; max-height:50vh; overflow:auto; padding:6px;}
.gallery-grid .thumb{position:relative; border:2px solid transparent; border-radius:8px; background:#111; padding:6px; cursor:pointer;}
.gallery-grid .thumb img{width:100%; height:100px; object-fit:cover; display:block; border-radius:6px;}
.gallery-grid .thumb.active{border-color:#e99}
.gallery-tools{display:flex; gap:10px; align-items:center; padding:10px 6px 4px}
.gallery-tools button{background:#a35; border:none; color:#fff; padding:8px 12px; border-radius:8px; font-weight:700; cursor:pointer}
.gallery-tools .danger{background:#822}
#forceUpdateBtn{position:fixed; bottom:12px; right:12px; z-index:1300; background:#222; color:#fff; border:1px solid #c33; border-radius:6px; padding:8px 10px; font-size:13px}
